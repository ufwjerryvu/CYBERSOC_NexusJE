<!--Supercharged-->

<!-- Cyberpunk Navbar -->
<nav class="navbar navbar-expand-md cyberpunk-navbar fixed-top">
  <div class="container">
    <a href="{{ url_for('views.static_html', route='/') }}" class="navbar-brand cyberpunk-brand">
      {% if Configs.ctf_logo %}
        <img
            class="img-responsive ctf_logo"
            src="{{ url_for('views.files', path=Configs.ctf_logo) }}"
            alt="{{ Configs.ctf_name }}"
            height="25"
        >
      {% else %}
        {{ Configs.ctf_name }}
      {% endif %}
    </a>

    <!-- Custom Cyberpunk Toggler -->
    <button
        class="navbar-toggler cyberpunk-toggler" type="button"
        data-bs-toggle="collapse" data-bs-target="#base-navbars"
        aria-controls="base-navbars" aria-expanded="false" aria-label="Toggle navigation"
    >
      <span class="toggler-bar"></span>
      <span class="toggler-bar"></span>
      <span class="toggler-bar"></span>
    </button>

    <div class="collapse navbar-collapse" id="base-navbars">
      <!-- Left Menu -->
      <ul class="navbar-nav me-auto">
        {% for page in Plugins.user_menu_pages %}
          <li class="nav-item">
            <a class="nav-link" href="{{ page.route }}" {% if page.link_target %}target="{{ page.link_target }}"{% endif %}>
              {{ page.title }}
            </a>
          </li>
        {% endfor %}

        {% if Configs.account_visibility != 'admins' %}
          <li class="nav-item"><a class="nav-link" href="{{ url_for('users.listing') }}">Users</a></li>
          {% if Configs.user_mode == 'teams' %}
            <li class="nav-item"><a class="nav-link" href="{{ url_for('teams.listing') }}">Teams</a></li>
          {% endif %}
        {% endif %}

        {% if Configs.account_visibility != 'admins' and Configs.score_visibility != 'admins' %}
          <li class="nav-item"><a class="nav-link" href="{{ url_for('scoreboard.listing') }}">Scoreboard</a></li>
        {% endif %}

        <li class="nav-item"><a class="nav-link" href="{{ url_for('challenges.listing') }}">Challenges</a></li>
        <li class="nav-item"><a class="nav-link" href="http://34.40.236.100/terminal">Terminal</a></li>
      </ul>

      <hr class="d-sm-flex d-md-flex d-lg-none">

      <!-- Right Menu -->
      <ul class="navbar-nav ms-md-auto d-block d-sm-flex d-md-flex">
        {% if authed() %}
          {% if is_admin() %}
            <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.view') }}"><i class="fas fa-wrench pe-1"></i>Admin</a></li>
          {% endif %}
          <li class="nav-item"><a class="nav-link" href="{{ url_for('views.notifications') }}"><i class="fas fa-bell pe-1"></i>Notifications</a></li>
          {% if Configs.user_mode == "teams" %}
            <li class="nav-item"><a class="nav-link" href="{{ url_for('teams.private') }}"><i class="fas fa-users pe-1"></i>Team</a></li>
          {% endif %}
          <li class="nav-item"><a class="nav-link" href="{{ url_for('users.private') }}"><i class="fas fa-user-circle pe-1"></i>Profile</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('views.settings') }}"><i class="fas fa-cogs pe-1"></i>Settings</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('auth.logout') }}"><i class="fas fa-sign-out-alt pe-1"></i>Logout</a></li>
        {% else %}
          {% if registration_visible() %}
            <li class="nav-item"><a class="nav-link" href="{{ url_for('auth.register') }}"><i class="fas fa-user-plus pe-1"></i>Register</a></li>
          {% endif %}
          <li class="nav-item"><a class="nav-link" href="{{ url_for('auth.login') }}"><i class="fas fa-sign-in-alt pe-1"></i>Login</a></li>
        {% endif %}

      </ul>
    </div>
  </div>
</nav>

<!-- Cyberpunk Styles -->
<style>
:root {
  --nx-bg: #0a0a0f;
  --nx-cyan: #0ff;
  --nx-purple: #8a2be2;
  --nx-pink: #ff2a6d;
  --nx-border: rgba(255, 255, 255, 0.2);
  --nx-text: #f5f5f5;
  --nx-text-dim: #bbb;
  --nx-glow: 0 0 15px rgba(0, 240, 255, 0.6), 0 0 30px rgba(138, 43, 226, 0.4);
}

/* Navbar */
.cyberpunk-navbar {
  background: rgba(0, 0, 0, 0.85) !important;
  border-bottom: 1px solid var(--nx-border);
  box-shadow: var(--nx-glow);
  backdrop-filter: blur(10px);
}

/* Brand */
.cyberpunk-brand {
  font-weight: 900;
  font-size: 1.6rem;
  background: linear-gradient(270deg, var(--nx-cyan), var(--nx-purple), var(--nx-pink));
  background-size: 400% 400%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: gradientShift 6s ease infinite;
  text-shadow: 0 0 15px rgba(0,240,255,0.7);
}

/* Gradient animation */
@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Nav Links */
.cyberpunk-navbar .nav-link {
  color: var(--nx-text-dim) !important;
  position: relative;
  transition: all 0.3s ease;
}

.cyberpunk-navbar .nav-link:hover,
.cyberpunk-navbar .nav-link.active {
  color: var(--nx-cyan) !important;
  text-shadow: 0 0 8px var(--nx-cyan), 0 0 20px var(--nx-purple);
  transform: scale(1.05);
}

/* Neon underline */
.cyberpunk-navbar .nav-link::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: 2px;
  width: 0%;
  height: 2px;
  background: linear-gradient(90deg, var(--nx-cyan), var(--nx-purple));
  transition: width 0.4s ease;
}

.cyberpunk-navbar .nav-link:hover::after {
  width: 100%;
}

/* Dropdown */
.cyberpunk-navbar .dropdown-menu {
  background: #111;
  border: 1px solid var(--nx-border);
  box-shadow: var(--nx-glow);
}

.cyberpunk-navbar .dropdown-item {
  color: var(--nx-text-dim);
  transition: all 0.3s ease;
}

.cyberpunk-navbar .dropdown-item:hover,
.cyberpunk-navbar .active-lang {
  color: var(--nx-cyan);
  background: rgba(0, 240, 255, 0.1);
  text-shadow: 0 0 8px var(--nx-cyan);
}

/* Custom Hamburger (Toggler) */
.cyberpunk-toggler {
  border: none;
  background: transparent;
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 6px;
}

.cyberpunk-toggler .toggler-bar {
  width: 24px;
  height: 3px;
  background: var(--nx-cyan);
  box-shadow: 0 0 8px var(--nx-cyan);
  transition: all 0.3s ease;
}

/* Animate bars into X when open */
.cyberpunk-toggler[aria-expanded="true"] .toggler-bar:nth-child(1) {
  transform: rotate(45deg) translateY(8px);
}

.cyberpunk-toggler[aria-expanded="true"] .toggler-bar:nth-child(2) {
  opacity: 0;
}

.cyberpunk-toggler[aria-expanded="true"] .toggler-bar:nth-child(3) {
  transform: rotate(-45deg) translateY(-8px);
}
</style>
